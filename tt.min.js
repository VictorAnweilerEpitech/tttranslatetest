function initTTTranslator(t){t.key||console.error("TTTranslator: key is required");var e=null,n="http://localhost:3000";let a=t.key;e=localStorage.getItem("tt-lang")?localStorage.getItem("tt-lang"):t.lang||"fr";let s=()=>{if(a){let t=new XMLHttpRequest;t.open("GET",n+"/api/translate/texts?id="+a+"&lang="+e,!0),t.send(),t.responseType="json",t.onload=()=>{if(4==t.readyState&&200==t.status){let e=t.response,n=document.querySelectorAll("[tt]"),a=null;for(let s of n)e[a=s.getAttribute("tt")]?s.innerHTML=e[a]:r(a)}else console.error(`tt translate: ${t.status} | Please contact support`)}}};s();let r=t=>{if(a){var s=new XMLHttpRequest;s.open("POST",n+"/api/translate/add",!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({project_id:a,content:t})),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){let n=JSON.parse(s.response);document.querySelector('[tt="'+t+'"]').innerHTML=n[l(e)]}}}},l=t=>{if(t){t=t.toLowerCase();let e=null;switch(t){case"en-gb":e="en_gb";break;case"en-us":e="en_us";break;case"pt-br":e="pt_br";break;case"pt-pt":e="pt_pt";break;default:e=t}return"lang_"+e}};if(t.magicBtn){let o=document.querySelector(t.magicBtn);if(o){let i=new XMLHttpRequest;i.open("GET",n+"/api/language/project?id="+a,!0),i.send(),i.responseType="json",i.onload=()=>{if(4==i.readyState&&200==i.status){let t=i.response,n=o.appendChild(document.createElement("select"));n.setAttribute("class",o.getAttribute("class")),n.setAttribute("style","outline: none"+o.getAttribute("style")),o.setAttribute("class",""),o.setAttribute("style","");let a=null;if(t.forEach(t=>{(a=n.appendChild(document.createElement("option"))).setAttribute("value",t.code),a.innerHTML=t.label}),n&&(n.addEventListener("change",function(){e=this.value,s(),localStorage.setItem("tt-lang",e)}),localStorage.getItem("tt-lang"))){let r=document.querySelector("#tt-langs-btn option[value='"+e+"']");r&&r.setAttribute("selected",1)}}else console.error(`tt translate: ${i.status} | Please contact support`)}}}}let TTTranslator={init:initTTTranslator};