function initTTTranslator(t){t.key||console.error("TTTranslator: key is required");var e=null,a="http://localhost:3000";let n=t.key,r=t.selector||".tt";e=localStorage.getItem("tt-lang")?localStorage.getItem("tt-lang"):t.lang||"fr";let s=()=>{if(n){let t=document.querySelectorAll(r),s=null;for(let i of t)i.getAttribute("tttranslate-key")||(s=i.innerHTML,i.setAttribute("tttranslate-key",s),i.innerHTML="");let o=new XMLHttpRequest;o.open("GET",a+"/api/translate/texts?id="+n+"&lang="+e,!0),o.send(),o.responseType="json",o.onload=()=>{if(4==o.readyState&&200==o.status){let t=o.response,e=document.querySelectorAll("[tttranslate-key]"),a=null;for(let n of e)t[a=n.getAttribute("tttranslate-key")]?n.innerHTML=t[a]:l(a,n)}else console.error(`tt translate: ${o.status} | Please contact support`)}}};s();let l=(t,r)=>{if(n){var s=new XMLHttpRequest;s.open("POST",a+"/api/translate/add",!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify({project_id:n,content:t})),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){r.setAttribute("tttranslate-key",t);let a=JSON.parse(s.response);r.innerHTML=a[i(e)]}}}},i=t=>{if(t){t=t.toLowerCase();let e=null;switch(t){case"en-gb":e="en_gb";break;case"en-us":e="en_us";break;case"pt-br":e="pt_br";break;case"pt-pt":e="pt_pt";break;default:e=t}return"lang_"+e}};if(t.magicBtn){let o=document.querySelector(t.magicBtn);if(o){let u=new XMLHttpRequest;u.open("GET",a+"/api/language/project?id="+n,!0),u.send(),u.responseType="json",u.onload=()=>{if(4==u.readyState&&200==u.status){let a=u.response,n=o.appendChild(document.createElement("select"));n.setAttribute("class",o.getAttribute("class")),n.setAttribute("style","outline: none"+o.getAttribute("style")),o.setAttribute("class",""),o.setAttribute("style","");let r=null;if(a.forEach(t=>{(r=n.appendChild(document.createElement("option"))).setAttribute("value",t.code),r.innerHTML=t.label}),n&&(n.addEventListener("change",function(){e=this.value,s(),localStorage.setItem("tt-lang",e)}),localStorage.getItem("tt-lang"))){let l=document.querySelector(t.magicBtn+" select option[value='"+e+"']");l&&l.setAttribute("selected",1)}}else console.error(`tt translate: ${u.status} | Please contact support`)}}}}let TTTranslator={init:initTTTranslator};